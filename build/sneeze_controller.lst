ARM GAS  C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"sneeze_controller.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.sneezeCANCallback,"ax",%progbits
  20              		.align	1
  21              		.global	sneezeCANCallback
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	sneezeCANCallback:
  27              	.LFB135:
  28              		.file 1 "Src/sneeze_controller.c"
   1:Src/sneeze_controller.c **** #include "sneeze_controller.h"
   2:Src/sneeze_controller.c **** #include <can_manager.h>
   3:Src/sneeze_controller.c **** #include <main.h>
   4:Src/sneeze_controller.c **** #include <rt_conf.h>
   5:Src/sneeze_controller.c **** #include "VESC.h"
   6:Src/sneeze_controller.c **** 
   7:Src/sneeze_controller.c **** #include <FreeRTOS.h>
   8:Src/sneeze_controller.c **** #include <stm32f3xx_hal_conf.h>
   9:Src/sneeze_controller.c **** #include <task.h>
  10:Src/sneeze_controller.c **** 
  11:Src/sneeze_controller.c **** static VESC* digMotor;
  12:Src/sneeze_controller.c **** static VESC* transMotor;
  13:Src/sneeze_controller.c **** static SneezeState state;
  14:Src/sneeze_controller.c **** static bool isHomed = false;
  15:Src/sneeze_controller.c **** static F32 digSpeed = 0.0f;
  16:Src/sneeze_controller.c **** static F32 transSpeed = 0.0f;
  17:Src/sneeze_controller.c **** 
  18:Src/sneeze_controller.c **** void sneezeCANCallback(rmc_can_msg msg) {
  29              		.loc 1 18 41 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 24
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 00B5     		push	{lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 14, -4
  37 0002 87B0     		sub	sp, sp, #28
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 32
  40 0004 EC46     		mov	ip, sp
ARM GAS  C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s 			page 2


  41 0006 8CE80F00 		stm	ip, {r0, r1, r2, r3}
  19:Src/sneeze_controller.c ****   // Because of the mask we only get messages that have our ID
  20:Src/sneeze_controller.c ****   U32 msg_type = msg.id >> 8u;
  42              		.loc 1 20 3 view .LVU1
  43              		.loc 1 20 7 is_stmt 0 view .LVU2
  44 000a 030A     		lsrs	r3, r0, #8
  45              	.LVL0:
  21:Src/sneeze_controller.c ****   if (msg_type == SNEEZE_MSG_SET_DIG_SPEED && msg.length >= 4) {
  46              		.loc 1 21 3 is_stmt 1 view .LVU3
  47              		.loc 1 21 6 is_stmt 0 view .LVU4
  48 000c 3D2B     		cmp	r3, #61
  49 000e 06D0     		beq	.L8
  50              	.L2:
  22:Src/sneeze_controller.c ****     state = DIGGING;
  23:Src/sneeze_controller.c ****     S32 idx = 0;
  24:Src/sneeze_controller.c ****     digSpeed = (F32)buffer_pop_int32(msg.buf, &idx);
  25:Src/sneeze_controller.c ****     if (digSpeed == 0) {
  26:Src/sneeze_controller.c ****       state = IDLE;
  27:Src/sneeze_controller.c ****     }
  28:Src/sneeze_controller.c ****   } else if (msg_type == SNEEZE_MSG_GO_HOME) {
  51              		.loc 1 28 10 is_stmt 1 view .LVU5
  52              		.loc 1 28 13 is_stmt 0 view .LVU6
  53 0010 3E2B     		cmp	r3, #62
  54 0012 20D0     		beq	.L9
  29:Src/sneeze_controller.c ****     if (!(state == IDLE && isHomed)) {
  30:Src/sneeze_controller.c ****       state = HOMING;
  31:Src/sneeze_controller.c ****     }
  32:Src/sneeze_controller.c ****   } else if (msg_type == SNEEZE_MSG_SET_TRANS_SPEED && msg.length >= 4) {
  55              		.loc 1 32 10 is_stmt 1 view .LVU7
  56              		.loc 1 32 13 is_stmt 0 view .LVU8
  57 0014 3F2B     		cmp	r3, #63
  58 0016 29D0     		beq	.L10
  59              	.LVL1:
  60              	.L1:
  33:Src/sneeze_controller.c ****     S32 idx = 0;
  34:Src/sneeze_controller.c ****     transSpeed = (F32)buffer_pop_int32(msg.buf, &idx);
  35:Src/sneeze_controller.c ****   }
  36:Src/sneeze_controller.c **** }
  61              		.loc 1 36 1 view .LVU9
  62 0018 07B0     		add	sp, sp, #28
  63              	.LCFI2:
  64              		.cfi_remember_state
  65              		.cfi_def_cfa_offset 4
  66              		@ sp needed
  67 001a 5DF804FB 		ldr	pc, [sp], #4
  68              	.LVL2:
  69              	.L8:
  70              	.LCFI3:
  71              		.cfi_restore_state
  21:Src/sneeze_controller.c ****     state = DIGGING;
  72              		.loc 1 21 50 discriminator 1 view .LVU10
  73 001e 039A     		ldr	r2, [sp, #12]
  21:Src/sneeze_controller.c ****     state = DIGGING;
  74              		.loc 1 21 44 discriminator 1 view .LVU11
  75 0020 032A     		cmp	r2, #3
  76 0022 F5DD     		ble	.L2
  77              	.LBB2:
ARM GAS  C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s 			page 3


  22:Src/sneeze_controller.c ****     S32 idx = 0;
  78              		.loc 1 22 5 is_stmt 1 view .LVU12
  22:Src/sneeze_controller.c ****     S32 idx = 0;
  79              		.loc 1 22 11 is_stmt 0 view .LVU13
  80 0024 1A4B     		ldr	r3, .L11
  81              	.LVL3:
  22:Src/sneeze_controller.c ****     S32 idx = 0;
  82              		.loc 1 22 11 view .LVU14
  83 0026 0122     		movs	r2, #1
  84 0028 1A70     		strb	r2, [r3]
  23:Src/sneeze_controller.c ****     digSpeed = (F32)buffer_pop_int32(msg.buf, &idx);
  85              		.loc 1 23 5 is_stmt 1 view .LVU15
  23:Src/sneeze_controller.c ****     digSpeed = (F32)buffer_pop_int32(msg.buf, &idx);
  86              		.loc 1 23 9 is_stmt 0 view .LVU16
  87 002a 0023     		movs	r3, #0
  88 002c 0593     		str	r3, [sp, #20]
  24:Src/sneeze_controller.c ****     if (digSpeed == 0) {
  89              		.loc 1 24 5 is_stmt 1 view .LVU17
  24:Src/sneeze_controller.c ****     if (digSpeed == 0) {
  90              		.loc 1 24 21 is_stmt 0 view .LVU18
  91 002e 05A9     		add	r1, sp, #20
  92 0030 01A8     		add	r0, sp, #4
  93              	.LVL4:
  24:Src/sneeze_controller.c ****     if (digSpeed == 0) {
  94              		.loc 1 24 21 view .LVU19
  95 0032 FFF7FEFF 		bl	buffer_pop_int32
  96              	.LVL5:
  24:Src/sneeze_controller.c ****     if (digSpeed == 0) {
  97              		.loc 1 24 21 view .LVU20
  98 0036 07EE900A 		vmov	s15, r0	@ int
  24:Src/sneeze_controller.c ****     if (digSpeed == 0) {
  99              		.loc 1 24 16 view .LVU21
 100 003a F8EEE77A 		vcvt.f32.s32	s15, s15
  24:Src/sneeze_controller.c ****     if (digSpeed == 0) {
 101              		.loc 1 24 14 view .LVU22
 102 003e 154B     		ldr	r3, .L11+4
 103 0040 C3ED007A 		vstr.32	s15, [r3]
  25:Src/sneeze_controller.c ****       state = IDLE;
 104              		.loc 1 25 5 is_stmt 1 view .LVU23
  25:Src/sneeze_controller.c ****       state = IDLE;
 105              		.loc 1 25 8 is_stmt 0 view .LVU24
 106 0044 F5EE407A 		vcmp.f32	s15, #0
 107 0048 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 108 004c E4D1     		bne	.L1
  26:Src/sneeze_controller.c ****     }
 109              		.loc 1 26 7 is_stmt 1 view .LVU25
  26:Src/sneeze_controller.c ****     }
 110              		.loc 1 26 13 is_stmt 0 view .LVU26
 111 004e 104B     		ldr	r3, .L11
 112 0050 0022     		movs	r2, #0
 113 0052 1A70     		strb	r2, [r3]
 114              	.LBE2:
  21:Src/sneeze_controller.c ****     state = DIGGING;
 115              		.loc 1 21 64 view .LVU27
 116 0054 E0E7     		b	.L1
 117              	.LVL6:
 118              	.L9:
ARM GAS  C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s 			page 4


  29:Src/sneeze_controller.c ****       state = HOMING;
 119              		.loc 1 29 5 is_stmt 1 view .LVU28
  29:Src/sneeze_controller.c ****       state = HOMING;
 120              		.loc 1 29 17 is_stmt 0 view .LVU29
 121 0056 0E4B     		ldr	r3, .L11
 122              	.LVL7:
  29:Src/sneeze_controller.c ****       state = HOMING;
 123              		.loc 1 29 17 view .LVU30
 124 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  29:Src/sneeze_controller.c ****       state = HOMING;
 125              		.loc 1 29 8 view .LVU31
 126 005a 1BB9     		cbnz	r3, .L6
  29:Src/sneeze_controller.c ****       state = HOMING;
 127              		.loc 1 29 25 discriminator 1 view .LVU32
 128 005c 0E4B     		ldr	r3, .L11+8
 129 005e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  29:Src/sneeze_controller.c ****       state = HOMING;
 130              		.loc 1 29 9 discriminator 1 view .LVU33
 131 0060 002B     		cmp	r3, #0
 132 0062 D9D1     		bne	.L1
 133              	.L6:
  30:Src/sneeze_controller.c ****     }
 134              		.loc 1 30 7 is_stmt 1 view .LVU34
  30:Src/sneeze_controller.c ****     }
 135              		.loc 1 30 13 is_stmt 0 view .LVU35
 136 0064 0A4B     		ldr	r3, .L11
 137 0066 0222     		movs	r2, #2
 138 0068 1A70     		strb	r2, [r3]
 139 006a D5E7     		b	.L1
 140              	.LVL8:
 141              	.L10:
  32:Src/sneeze_controller.c ****     S32 idx = 0;
 142              		.loc 1 32 59 discriminator 1 view .LVU36
 143 006c 039B     		ldr	r3, [sp, #12]
 144              	.LVL9:
  32:Src/sneeze_controller.c ****     S32 idx = 0;
 145              		.loc 1 32 53 discriminator 1 view .LVU37
 146 006e 032B     		cmp	r3, #3
 147 0070 D2DD     		ble	.L1
 148              	.LBB3:
  33:Src/sneeze_controller.c ****     transSpeed = (F32)buffer_pop_int32(msg.buf, &idx);
 149              		.loc 1 33 5 is_stmt 1 view .LVU38
  33:Src/sneeze_controller.c ****     transSpeed = (F32)buffer_pop_int32(msg.buf, &idx);
 150              		.loc 1 33 9 is_stmt 0 view .LVU39
 151 0072 0023     		movs	r3, #0
 152 0074 0593     		str	r3, [sp, #20]
  34:Src/sneeze_controller.c ****   }
 153              		.loc 1 34 5 is_stmt 1 view .LVU40
  34:Src/sneeze_controller.c ****   }
 154              		.loc 1 34 23 is_stmt 0 view .LVU41
 155 0076 05A9     		add	r1, sp, #20
 156 0078 01A8     		add	r0, sp, #4
 157              	.LVL10:
  34:Src/sneeze_controller.c ****   }
 158              		.loc 1 34 23 view .LVU42
 159 007a FFF7FEFF 		bl	buffer_pop_int32
 160              	.LVL11:
ARM GAS  C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s 			page 5


  34:Src/sneeze_controller.c ****   }
 161              		.loc 1 34 23 view .LVU43
 162 007e 07EE900A 		vmov	s15, r0	@ int
  34:Src/sneeze_controller.c ****   }
 163              		.loc 1 34 18 view .LVU44
 164 0082 F8EEE77A 		vcvt.f32.s32	s15, s15
  34:Src/sneeze_controller.c ****   }
 165              		.loc 1 34 16 view .LVU45
 166 0086 054B     		ldr	r3, .L11+12
 167 0088 C3ED007A 		vstr.32	s15, [r3]
 168              	.LBE3:
 169              		.loc 1 36 1 view .LVU46
 170 008c C4E7     		b	.L1
 171              	.L12:
 172 008e 00BF     		.align	2
 173              	.L11:
 174 0090 00000000 		.word	.LANCHOR0
 175 0094 00000000 		.word	.LANCHOR1
 176 0098 00000000 		.word	.LANCHOR2
 177 009c 00000000 		.word	.LANCHOR3
 178              		.cfi_endproc
 179              	.LFE135:
 181              		.section	.text.sneezeControllerFunc,"ax",%progbits
 182              		.align	1
 183              		.global	sneezeControllerFunc
 184              		.syntax unified
 185              		.thumb
 186              		.thumb_func
 188              	sneezeControllerFunc:
 189              	.LVL12:
 190              	.LFB136:
  37:Src/sneeze_controller.c **** 
  38:Src/sneeze_controller.c **** void sneezeControllerFunc(void const* argument) {
 191              		.loc 1 38 49 is_stmt 1 view -0
 192              		.cfi_startproc
 193              		@ Volatile: function does not return.
 194              		@ args = 0, pretend = 0, frame = 16
 195              		@ frame_needed = 0, uses_anonymous_args = 0
 196              		.loc 1 38 49 is_stmt 0 view .LVU48
 197 0000 00B5     		push	{lr}
 198              	.LCFI4:
 199              		.cfi_def_cfa_offset 4
 200              		.cfi_offset 14, -4
 201 0002 85B0     		sub	sp, sp, #20
 202              	.LCFI5:
 203              		.cfi_def_cfa_offset 24
  39:Src/sneeze_controller.c ****   // System setup
  40:Src/sneeze_controller.c ****   registerCANMsgHandler(SNEEZE_SYS_ID, &sneezeCANCallback);
 204              		.loc 1 40 3 is_stmt 1 view .LVU49
 205 0004 3349     		ldr	r1, .L23
 206 0006 6720     		movs	r0, #103
 207              	.LVL13:
 208              		.loc 1 40 3 is_stmt 0 view .LVU50
 209 0008 FFF7FEFF 		bl	registerCANMsgHandler
 210              	.LVL14:
  41:Src/sneeze_controller.c ****   digMotor = create_vesc(SNEEZE_MOTOR_DIG, SNEEZE_MOTOR_POLE_PAIRS);
 211              		.loc 1 41 3 is_stmt 1 view .LVU51
ARM GAS  C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s 			page 6


 212              		.loc 1 41 14 is_stmt 0 view .LVU52
 213 000c 0721     		movs	r1, #7
 214 000e 0D20     		movs	r0, #13
 215 0010 FFF7FEFF 		bl	create_vesc
 216              	.LVL15:
 217              		.loc 1 41 12 view .LVU53
 218 0014 304B     		ldr	r3, .L23+4
 219 0016 1860     		str	r0, [r3]
  42:Src/sneeze_controller.c ****   transMotor = create_vesc(SNEEZE_MOTOR_TRANS, SNEEZE_MOTOR_POLE_PAIRS);
 220              		.loc 1 42 3 is_stmt 1 view .LVU54
 221              		.loc 1 42 16 is_stmt 0 view .LVU55
 222 0018 0721     		movs	r1, #7
 223 001a 0E20     		movs	r0, #14
 224 001c FFF7FEFF 		bl	create_vesc
 225              	.LVL16:
 226              		.loc 1 42 14 view .LVU56
 227 0020 2E4B     		ldr	r3, .L23+8
 228 0022 1860     		str	r0, [r3]
 229 0024 2EE0     		b	.L18
 230              	.L20:
 231              	.LBB4:
  43:Src/sneeze_controller.c **** 
  44:Src/sneeze_controller.c ****   TickType_t lastWakeTime;
  45:Src/sneeze_controller.c ****   while (1) {
  46:Src/sneeze_controller.c ****     vTaskDelayUntil(&lastWakeTime, SNEEZE_LOOP_MS * portTICK_RATE_MS);
  47:Src/sneeze_controller.c ****     // Handle target state transitions
  48:Src/sneeze_controller.c ****     isHomed = HAL_GPIO_ReadPin(SNEEZE_Home_GPIO_Port, SNEEZE_Home_Pin);
  49:Src/sneeze_controller.c **** 
  50:Src/sneeze_controller.c ****     if (state == HOMING && isHomed) {
 232              		.loc 1 50 25 discriminator 1 view .LVU57
 233 0026 0028     		cmp	r0, #0
 234 0028 3ED0     		beq	.L14
  51:Src/sneeze_controller.c ****       state = IDLE;
 235              		.loc 1 51 7 is_stmt 1 view .LVU58
 236              		.loc 1 51 13 is_stmt 0 view .LVU59
 237 002a 2D4B     		ldr	r3, .L23+12
 238 002c 0022     		movs	r2, #0
 239 002e 1A70     		strb	r2, [r3]
 240 0030 3AE0     		b	.L14
 241              	.L21:
  52:Src/sneeze_controller.c ****     }
  53:Src/sneeze_controller.c **** 
  54:Src/sneeze_controller.c ****     if (state == HOMING) {
  55:Src/sneeze_controller.c ****       vesc_set_rpm(digMotor, 100);
 242              		.loc 1 55 7 is_stmt 1 view .LVU60
 243 0032 9FED2C0A 		vldr.32	s0, .L23+16
 244 0036 284B     		ldr	r3, .L23+4
 245 0038 1868     		ldr	r0, [r3]
 246 003a FFF7FEFF 		bl	vesc_set_rpm
 247              	.LVL17:
 248              	.L16:
  56:Src/sneeze_controller.c ****     } else if (state == DIGGING) {
  57:Src/sneeze_controller.c ****       vesc_set_rpm(digMotor, digSpeed);
  58:Src/sneeze_controller.c ****     } else {
  59:Src/sneeze_controller.c ****       vesc_set_rpm(digMotor, 0);
  60:Src/sneeze_controller.c ****     }
  61:Src/sneeze_controller.c **** 
ARM GAS  C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s 			page 7


  62:Src/sneeze_controller.c ****     vesc_set_rpm(transMotor, transSpeed);
 249              		.loc 1 62 5 view .LVU61
 250 003e 2A4B     		ldr	r3, .L23+20
 251 0040 93ED000A 		vldr.32	s0, [r3]
 252 0044 254B     		ldr	r3, .L23+8
 253 0046 1868     		ldr	r0, [r3]
 254 0048 FFF7FEFF 		bl	vesc_set_rpm
 255              	.LVL18:
  63:Src/sneeze_controller.c **** 
  64:Src/sneeze_controller.c ****     // Send status message
  65:Src/sneeze_controller.c ****     U8 data[6];
 256              		.loc 1 65 5 view .LVU62
  66:Src/sneeze_controller.c ****     data[0] = state;
 257              		.loc 1 66 5 view .LVU63
 258              		.loc 1 66 13 is_stmt 0 view .LVU64
 259 004c 244B     		ldr	r3, .L23+12
 260 004e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 261 0050 8DF80430 		strb	r3, [sp, #4]
  67:Src/sneeze_controller.c ****     data[1] = isHomed;
 262              		.loc 1 67 5 is_stmt 1 view .LVU65
 263              		.loc 1 67 13 is_stmt 0 view .LVU66
 264 0054 254B     		ldr	r3, .L23+24
 265 0056 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 266 0058 8DF80530 		strb	r3, [sp, #5]
  68:Src/sneeze_controller.c ****     S32 idx = 2;
 267              		.loc 1 68 5 is_stmt 1 view .LVU67
 268              		.loc 1 68 9 is_stmt 0 view .LVU68
 269 005c 0223     		movs	r3, #2
 270 005e 0093     		str	r3, [sp]
  69:Src/sneeze_controller.c ****     buffer_put_int32(data, &idx, (S32)vesc_get_rpm(digMotor));
 271              		.loc 1 69 5 is_stmt 1 view .LVU69
 272              		.loc 1 69 39 is_stmt 0 view .LVU70
 273 0060 1D4B     		ldr	r3, .L23+4
 274 0062 1868     		ldr	r0, [r3]
 275 0064 FFF7FEFF 		bl	vesc_get_rpm
 276              	.LVL19:
 277              		.loc 1 69 5 view .LVU71
 278 0068 FDEEC07A 		vcvt.s32.f32	s15, s0
 279 006c 17EE902A 		vmov	r2, s15	@ int
 280 0070 6946     		mov	r1, sp
 281 0072 01A8     		add	r0, sp, #4
 282 0074 FFF7FEFF 		bl	buffer_put_int32
 283              	.LVL20:
  70:Src/sneeze_controller.c ****     do_send_can_message((SNEEZE_MSG_STATUS << 8u) | SNEEZE_SYS_ID, data, 6);
 284              		.loc 1 70 5 is_stmt 1 view .LVU72
 285 0078 0622     		movs	r2, #6
 286 007a 01A9     		add	r1, sp, #4
 287 007c 43F66740 		movw	r0, #15463
 288 0080 FFF7FEFF 		bl	do_send_can_message
 289              	.LVL21:
 290              	.LBE4:
  45:Src/sneeze_controller.c ****     vTaskDelayUntil(&lastWakeTime, SNEEZE_LOOP_MS * portTICK_RATE_MS);
 291              		.loc 1 45 9 view .LVU73
 292              	.L18:
  44:Src/sneeze_controller.c ****   while (1) {
 293              		.loc 1 44 3 view .LVU74
  45:Src/sneeze_controller.c ****     vTaskDelayUntil(&lastWakeTime, SNEEZE_LOOP_MS * portTICK_RATE_MS);
ARM GAS  C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s 			page 8


 294              		.loc 1 45 3 view .LVU75
 295              	.LBB5:
  46:Src/sneeze_controller.c ****     // Handle target state transitions
 296              		.loc 1 46 5 view .LVU76
 297 0084 1421     		movs	r1, #20
 298 0086 03A8     		add	r0, sp, #12
 299 0088 FFF7FEFF 		bl	vTaskDelayUntil
 300              	.LVL22:
  48:Src/sneeze_controller.c **** 
 301              		.loc 1 48 5 view .LVU77
  48:Src/sneeze_controller.c **** 
 302              		.loc 1 48 15 is_stmt 0 view .LVU78
 303 008c 4FF48071 		mov	r1, #256
 304 0090 1748     		ldr	r0, .L23+28
 305 0092 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 306              	.LVL23:
 307 0096 0038     		subs	r0, r0, #0
 308 0098 18BF     		it	ne
 309 009a 0120     		movne	r0, #1
  48:Src/sneeze_controller.c **** 
 310              		.loc 1 48 13 view .LVU79
 311 009c 134B     		ldr	r3, .L23+24
 312 009e 1870     		strb	r0, [r3]
  50:Src/sneeze_controller.c ****       state = IDLE;
 313              		.loc 1 50 5 is_stmt 1 view .LVU80
  50:Src/sneeze_controller.c ****       state = IDLE;
 314              		.loc 1 50 15 is_stmt 0 view .LVU81
 315 00a0 0F4B     		ldr	r3, .L23+12
 316 00a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  50:Src/sneeze_controller.c ****       state = IDLE;
 317              		.loc 1 50 8 view .LVU82
 318 00a4 022B     		cmp	r3, #2
 319 00a6 BED0     		beq	.L20
 320              	.L14:
  54:Src/sneeze_controller.c ****       vesc_set_rpm(digMotor, 100);
 321              		.loc 1 54 5 is_stmt 1 view .LVU83
  54:Src/sneeze_controller.c ****       vesc_set_rpm(digMotor, 100);
 322              		.loc 1 54 15 is_stmt 0 view .LVU84
 323 00a8 0D4B     		ldr	r3, .L23+12
 324 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  54:Src/sneeze_controller.c ****       vesc_set_rpm(digMotor, 100);
 325              		.loc 1 54 8 view .LVU85
 326 00ac 022B     		cmp	r3, #2
 327 00ae C0D0     		beq	.L21
  56:Src/sneeze_controller.c ****       vesc_set_rpm(digMotor, digSpeed);
 328              		.loc 1 56 12 is_stmt 1 view .LVU86
  56:Src/sneeze_controller.c ****       vesc_set_rpm(digMotor, digSpeed);
 329              		.loc 1 56 15 is_stmt 0 view .LVU87
 330 00b0 012B     		cmp	r3, #1
 331 00b2 06D0     		beq	.L22
  59:Src/sneeze_controller.c ****     }
 332              		.loc 1 59 7 is_stmt 1 view .LVU88
 333 00b4 9FED0F0A 		vldr.32	s0, .L23+32
 334 00b8 074B     		ldr	r3, .L23+4
 335 00ba 1868     		ldr	r0, [r3]
 336 00bc FFF7FEFF 		bl	vesc_set_rpm
 337              	.LVL24:
ARM GAS  C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s 			page 9


 338 00c0 BDE7     		b	.L16
 339              	.L22:
  57:Src/sneeze_controller.c ****     } else {
 340              		.loc 1 57 7 view .LVU89
 341 00c2 0D4B     		ldr	r3, .L23+36
 342 00c4 93ED000A 		vldr.32	s0, [r3]
 343 00c8 034B     		ldr	r3, .L23+4
 344 00ca 1868     		ldr	r0, [r3]
 345 00cc FFF7FEFF 		bl	vesc_set_rpm
 346              	.LVL25:
 347 00d0 B5E7     		b	.L16
 348              	.L24:
 349 00d2 00BF     		.align	2
 350              	.L23:
 351 00d4 00000000 		.word	sneezeCANCallback
 352 00d8 00000000 		.word	.LANCHOR4
 353 00dc 00000000 		.word	.LANCHOR5
 354 00e0 00000000 		.word	.LANCHOR0
 355 00e4 0000C842 		.word	1120403456
 356 00e8 00000000 		.word	.LANCHOR3
 357 00ec 00000000 		.word	.LANCHOR2
 358 00f0 00080048 		.word	1207961600
 359 00f4 00000000 		.word	0
 360 00f8 00000000 		.word	.LANCHOR1
 361              	.LBE5:
 362              		.cfi_endproc
 363              	.LFE136:
 365              		.section	.text.isSNEEZEHome,"ax",%progbits
 366              		.align	1
 367              		.global	isSNEEZEHome
 368              		.syntax unified
 369              		.thumb
 370              		.thumb_func
 372              	isSNEEZEHome:
 373              	.LFB137:
  71:Src/sneeze_controller.c ****   }
  72:Src/sneeze_controller.c **** }
  73:Src/sneeze_controller.c **** 
  74:Src/sneeze_controller.c **** bool isSNEEZEHome() { return isHomed; }...
 374              		.loc 1 74 21 view -0
 375              		.cfi_startproc
 376              		@ args = 0, pretend = 0, frame = 0
 377              		@ frame_needed = 0, uses_anonymous_args = 0
 378              		@ link register save eliminated.
 379              		.loc 1 74 23 view .LVU91
 380              		.loc 1 74 39 is_stmt 0 view .LVU92
 381 0000 014B     		ldr	r3, .L26
 382 0002 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 383 0004 7047     		bx	lr
 384              	.L27:
 385 0006 00BF     		.align	2
 386              	.L26:
 387 0008 00000000 		.word	.LANCHOR2
 388              		.cfi_endproc
 389              	.LFE137:
 391              		.section	.bss.digMotor,"aw",%nobits
 392              		.align	2
ARM GAS  C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s 			page 10


 393              		.set	.LANCHOR4,. + 0
 396              	digMotor:
 397 0000 00000000 		.space	4
 398              		.section	.bss.digSpeed,"aw",%nobits
 399              		.align	2
 400              		.set	.LANCHOR1,. + 0
 403              	digSpeed:
 404 0000 00000000 		.space	4
 405              		.section	.bss.isHomed,"aw",%nobits
 406              		.set	.LANCHOR2,. + 0
 409              	isHomed:
 410 0000 00       		.space	1
 411              		.section	.bss.state,"aw",%nobits
 412              		.set	.LANCHOR0,. + 0
 415              	state:
 416 0000 00       		.space	1
 417              		.section	.bss.transMotor,"aw",%nobits
 418              		.align	2
 419              		.set	.LANCHOR5,. + 0
 422              	transMotor:
 423 0000 00000000 		.space	4
 424              		.section	.bss.transSpeed,"aw",%nobits
 425              		.align	2
 426              		.set	.LANCHOR3,. + 0
 429              	transSpeed:
 430 0000 00000000 		.space	4
 431              		.text
 432              	.Letext0:
 433              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 434              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 435              		.file 4 "Inc/types.h"
 436              		.file 5 "Inc/can_manager.h"
 437              		.file 6 "Inc/sneeze_controller.h"
 438              		.file 7 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/stm32f303xe.h"
 439              		.file 8 "Inc/VESC.h"
 440              		.file 9 "Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F/portmacro.h"
 441              		.file 10 "Inc/buffer.h"
 442              		.file 11 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
 443              		.file 12 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_gpio.h"
ARM GAS  C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s 			page 11


DEFINED SYMBOLS
                            *ABS*:00000000 sneeze_controller.c
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:20     .text.sneezeCANCallback:00000000 $t
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:26     .text.sneezeCANCallback:00000000 sneezeCANCallback
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:174    .text.sneezeCANCallback:00000090 $d
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:182    .text.sneezeControllerFunc:00000000 $t
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:188    .text.sneezeControllerFunc:00000000 sneezeControllerFunc
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:351    .text.sneezeControllerFunc:000000d4 $d
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:366    .text.isSNEEZEHome:00000000 $t
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:372    .text.isSNEEZEHome:00000000 isSNEEZEHome
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:387    .text.isSNEEZEHome:00000008 $d
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:392    .bss.digMotor:00000000 $d
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:396    .bss.digMotor:00000000 digMotor
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:399    .bss.digSpeed:00000000 $d
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:403    .bss.digSpeed:00000000 digSpeed
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:409    .bss.isHomed:00000000 isHomed
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:410    .bss.isHomed:00000000 $d
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:415    .bss.state:00000000 state
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:416    .bss.state:00000000 $d
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:418    .bss.transMotor:00000000 $d
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:422    .bss.transMotor:00000000 transMotor
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:425    .bss.transSpeed:00000000 $d
C:\Users\jmbli\AppData\Local\Temp\ccMOO1Sg.s:429    .bss.transSpeed:00000000 transSpeed

UNDEFINED SYMBOLS
buffer_pop_int32
registerCANMsgHandler
create_vesc
vesc_set_rpm
vesc_get_rpm
buffer_put_int32
do_send_can_message
vTaskDelayUntil
HAL_GPIO_ReadPin
